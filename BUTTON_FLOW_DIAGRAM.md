# Agent Management - Button Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ADMIN PANEL                                  â”‚
â”‚                                                                     â”‚
â”‚  [ç”¨æˆ·åˆ—è¡¨] [ç”¨æˆ·ç§å‘] [è®¾ç½®å……å€¼åœ°å€] [å•†å“ç®¡ç†]                      â”‚
â”‚  [ä¿®æ”¹æ¬¢è¿è¯­] [è®¾ç½®èœå•æŒ‰é’®] [æ”¶ç›Šè¯´æ˜] [æ”¶å…¥ç»Ÿè®¡]                    â”‚
â”‚  [å¯¼å‡ºç”¨æˆ·åˆ—è¡¨] [å¯¼å‡ºä¸‹å•è®°å½•] [ç®¡ç†å‘˜ç®¡ç†] [ä»£ç†ç®¡ç†] â—„â”€â”€â”         â”‚
â”‚  [é”€å”®ç»Ÿè®¡] [åº“å­˜é¢„è­¦] [æ•°æ®å¯¼å‡º] [å¤šè¯­è¨€ç®¡ç†]              â”‚         â”‚
â”‚  [å…³é—­é¢æ¿]                                                   â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
                                                             â”‚ Click
                                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AGENT MANAGEMENT PANEL                            â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¤– ä»£ç†ç®¡ç†                                                         â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Š ä»£ç†æ€»æ•°: 3                                                      â”‚
â”‚  ğŸŸ¢ è¿è¡Œä¸­: 2                                                        â”‚
â”‚  ğŸ”´ å·²åœæ­¢: 1                                                        â”‚
â”‚                                                                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                                                    â”‚
â”‚                                                                     â”‚
â”‚  1. ğŸŸ¢ é›¶å”®ä»£ç†                                                      â”‚
â”‚     ğŸ“‹ ID: agent001                                                 â”‚
â”‚     ğŸ“ çŠ¶æ€: è¿è¡Œä¸­                                                  â”‚
â”‚                                                                     â”‚
â”‚  2. ğŸŸ¢ æ‰¹å‘ä»£ç†                                                      â”‚
â”‚     ğŸ“‹ ID: agent002                                                 â”‚
â”‚     ğŸ“ çŠ¶æ€: è¿è¡Œä¸­                                                  â”‚
â”‚                                                                     â”‚
â”‚  3. ğŸ”´ åŒºåŸŸä»£ç†                                                      â”‚
â”‚     ğŸ“‹ ID: agent003                                                 â”‚
â”‚     ğŸ“ çŠ¶æ€: å·²åœæ­¢                                                  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ â• æ–°å¢ä»£ç†        â”‚  â”‚ ğŸ”„ åˆ·æ–°åˆ—è¡¨        â”‚                       â”‚
â”‚  â”‚ agent_new        â”‚  â”‚ agent_refresh    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚           â”‚                      â”‚                                 â”‚
â”‚           â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚           â”‚                                    â”‚ Refresh           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ (reloads          â”‚
â”‚  â”‚ â¸ åœæ­¢ é›¶å”®      â”‚  â”‚ ğŸ—‘ åˆ é™¤            â”‚   â”‚  panel)           â”‚
â”‚  â”‚ agent_tgl ag001 â”‚  â”‚ agent_del ag001  â”‚   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚           â”‚                     â”‚              â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚  â”‚ â¸ åœæ­¢ æ‰¹å‘      â”‚  â”‚ ğŸ—‘ åˆ é™¤            â”‚   â”‚                   â”‚
â”‚  â”‚ agent_tgl ag002 â”‚  â”‚ agent_del ag002  â”‚   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚           â”‚                     â”‚              â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚  â”‚ â–¶ï¸ å¯åŠ¨ åŒºåŸŸ      â”‚  â”‚ ğŸ—‘ åˆ é™¤            â”‚   â”‚                   â”‚
â”‚  â”‚ agent_tgl ag003 â”‚  â”‚ agent_del ag003  â”‚   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚           â”‚                     â”‚              â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                   â”‚
â”‚  â”‚                                             â”‚                   â”‚
â”‚  â”‚  Toggle/Delete Actions:                    â”‚                   â”‚
â”‚  â”‚  â€¢ Show alert with result                  â”‚                   â”‚
â”‚  â”‚  â€¢ Refresh panel automatically â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚                                                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                                                  â”‚  â”‚
â”‚  [ğŸ”™ è¿”å›æ§åˆ¶å°]                                                  â”‚  â”‚
â”‚   backstart                                                      â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”˜
                                                                   â”‚
                                                                   â””â”€â”€â–º Back to Admin Panel


NEW AGENT CREATION FLOW (agent_new):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click: â• æ–°å¢ä»£ç†                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STEP 1 - TOKEN INPUT                              â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¤– åˆ›å»ºæ–°ä»£ç† - æ­¥éª¤ 1/2                                            â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“ è¯·å‘é€ä»£ç†Botçš„Token                                             â”‚
â”‚                                                                     â”‚
â”‚  å¦‚ä½•è·å–Tokenï¼š                                                     â”‚
â”‚  1. æ‰“å¼€ @BotFather                                                 â”‚
â”‚  2. å‘é€ /newbot åˆ›å»ºæ–°Bot                                          â”‚
â”‚  3. æŒ‰æç¤ºè®¾ç½®Botåç§°å’Œç”¨æˆ·å                                         â”‚
â”‚  4. å¤åˆ¶æ”¶åˆ°çš„Tokenå¹¶å‘é€åˆ°è¿™é‡Œ                                       â”‚
â”‚                                                                     â”‚
â”‚  Tokenæ ¼å¼ç¤ºä¾‹ï¼š1234567890:ABCdefGHIjklMNOpqrsTUVwxyz             â”‚
â”‚                                                                     â”‚
â”‚  [ğŸš« å–æ¶ˆ]                                                          â”‚
â”‚   agent_manage                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â”‚ User sends token
                                                 â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ Validate Token   â”‚
                                        â”‚ â€¢ Length >= 30   â”‚
                                        â”‚ â€¢ Contains ':'   â”‚
                                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Invalid         â”‚ Valid           â”‚
                           â–¼                 â–¼                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                    â”‚ Error Messageâ”‚  â”‚ Store in context â”‚   â”‚
                    â”‚ â€¢ Format     â”‚  â”‚ â€¢ Show next step â”‚   â”‚
                    â”‚   example    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                    â”‚ â€¢ Try again  â”‚           â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â–¼              â”‚
                                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
â”‚                   STEP 2 - NAME INPUT                        â”‚     â”‚
â”‚                                                              â”‚     â”‚
â”‚  âœ… Tokenå·²æ¥æ”¶ï¼                                            â”‚     â”‚
â”‚                                                              â”‚     â”‚
â”‚  ğŸ¤– åˆ›å»ºæ–°ä»£ç† - æ­¥éª¤ 2/2                                     â”‚     â”‚
â”‚                                                              â”‚     â”‚
â”‚  ğŸ“ è¯·è¾“å…¥ä»£ç†çš„æ˜¾ç¤ºåç§°:                                     â”‚     â”‚
â”‚                                                              â”‚     â”‚
â”‚  ä¾‹å¦‚: é›¶å”®ä»£ç†ã€æ‰¹å‘ä»£ç†ã€åŒºåŸŸAä»£ç†ç­‰                         â”‚     â”‚
â”‚  åç§°é•¿åº¦: 1-50å­—ç¬¦                                          â”‚     â”‚
â”‚                                                              â”‚     â”‚
â”‚  [ğŸš« å–æ¶ˆ]                                                   â”‚     â”‚
â”‚   agent_manage                                              â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
                                               â”‚               â”‚
                                               â”‚ User sends    â”‚
                                               â”‚ name          â”‚
                                               â–¼               â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                                      â”‚ Validate Name    â”‚    â”‚
                                      â”‚ â€¢ Length 1-50    â”‚    â”‚
                                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                           â”‚                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                         â”‚ Invalid         â”‚ Valid        â”‚  â”‚
                         â–¼                 â–¼              â”‚  â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
                  â”‚ Error Messageâ”‚  â”‚ Show Processing  â”‚ â”‚  â”‚
                  â”‚ â€¢ Length infoâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
                  â”‚ â€¢ Try again  â”‚           â”‚           â”‚  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â–¼           â”‚  â”‚
                                                          â”‚  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”
â”‚                   PROCESSING                            â”‚  â”‚  â”‚
â”‚                                                          â”‚  â”‚  â”‚
â”‚  â³ æ­£åœ¨åˆ›å»ºä»£ç†...                                       â”‚  â”‚  â”‚
â”‚                                                          â”‚  â”‚  â”‚
â”‚  1. ä¿å­˜é…ç½® âœ…                                          â”‚  â”‚  â”‚
â”‚  2. éªŒè¯Token â³                                         â”‚  â”‚  â”‚
â”‚  3. å¯åŠ¨Bot â³                                           â”‚  â”‚  â”‚
â”‚                                                          â”‚  â”‚  â”‚
â”‚  è¯·ç¨å€™...                                               â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”˜
                                               â”‚           â”‚  â”‚
                                               â–¼           â”‚  â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
                                      â”‚ Save Agent       â”‚ â”‚  â”‚
                                      â”‚ Start Agent Bot  â”‚ â”‚  â”‚
                                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
                                           â”‚               â”‚  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
                         â”‚ Success         â”‚ Failure   â”‚  â”‚  â”‚
                         â–¼                 â–¼           â”‚  â”‚  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚        SUCCESS                 â”‚  â”‚      FAILURE    â”‚  â”‚  â”‚  â”‚
â”‚                                â”‚  â”‚                 â”‚  â”‚  â”‚  â”‚
â”‚  âœ… ä»£ç†åˆ›å»ºæˆåŠŸï¼              â”‚  â”‚  âš ï¸ ä»£ç†å·²ä¿å­˜ï¼Œ â”‚  â”‚  â”‚  â”‚
â”‚                                â”‚  â”‚     ä½†å¯åŠ¨å¤±è´¥   â”‚  â”‚  â”‚  â”‚
â”‚  ğŸ“‹ ä»£ç†ID: agent_xxx          â”‚  â”‚                 â”‚  â”‚  â”‚  â”‚
â”‚  ğŸ¤– åç§°: é›¶å”®ä»£ç†              â”‚  â”‚  å¯èƒ½åŸå› ï¼š      â”‚  â”‚  â”‚  â”‚
â”‚  ğŸŸ¢ çŠ¶æ€: è¿è¡Œä¸­                â”‚  â”‚  â€¢ Tokenæ— æ•ˆ    â”‚  â”‚  â”‚  â”‚
â”‚                                â”‚  â”‚  â€¢ Botæœªè®¿é—®    â”‚  â”‚  â”‚  â”‚
â”‚  ä»£ç†Botå·²æˆåŠŸå¯åŠ¨              â”‚  â”‚  â€¢ ç½‘ç»œé—®é¢˜     â”‚  â”‚  â”‚  â”‚
â”‚                                â”‚  â”‚                 â”‚  â”‚  â”‚  â”‚
â”‚  [ğŸ¤– è¿”å›ä»£ç†ç®¡ç†]              â”‚  â”‚  [ğŸ¤– è¿”å›ä»£ç†   â”‚  â”‚  â”‚  â”‚
â”‚   agent_manage                 â”‚  â”‚    ç®¡ç†]        â”‚  â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   agent_manage  â”‚  â”‚  â”‚  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
                                                         â”‚  â”‚  â”‚
                                    All return to â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                                    Agent Management Panel  â”‚  â”‚
                                                            â”‚  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜  â”‚
                                                               â”‚
CALLBACK DATA SUMMARY:                                         â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
                                                               â”‚
Main Actions:                                                  â”‚
â€¢ agent_manage (12 bytes) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€¢ agent_refresh (13 bytes)
â€¢ agent_new (9 bytes)

Per-Agent Actions:
â€¢ agent_tgl <agent_id> (~31 bytes)
â€¢ agent_del <agent_id> (~31 bytes)

Navigation:
â€¢ backstart (return to admin panel)

All callback_data < 64 bytes âœ…


ERROR HANDLING:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Every operation includes:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try-Catch Block                    â”‚
â”‚ â”œâ”€ Operation code                  â”‚
â”‚ â”œâ”€ Error logging with stack trace  â”‚
â”‚ â””â”€ User-friendly error message     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Examples:
â€¢ Token validation fails â†’ Show format example
â€¢ Name too long â†’ Show current vs required length
â€¢ Agent start fails â†’ Show possible causes + solutions
â€¢ MongoDB error â†’ Fallback to JSON storage
â€¢ Network timeout â†’ Suggest retry


USER FEEDBACK:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•

All operations provide immediate feedback:
â€¢ Success: Alert + Panel refresh
â€¢ Failure: Alert with explanation
â€¢ Progress: Step indicators (1/2, 2/2)
â€¢ Status: Icons (ğŸŸ¢ ğŸ”´ ğŸŸ¡)
```

## Button Response Flow

```
User Click â†’ Telegram API â†’ Bot Handler â†’ Validation â†’ Operation â†’ Feedback
                                â”‚               â”‚           â”‚
                                â”‚               â”‚           â””â”€â–º Alert/Edit Message
                                â”‚               â””â”€â–º Check Permissions
                                â””â”€â–º Pattern Match (^agent_xxx)
```

## State Management

```
Agent Creation State:
1. sign = 0 (idle)
2. sign = 'agent_add_token' (waiting for token)
3. sign = 'agent_add_name' (waiting for name)
4. sign = 0 (complete)

Context Storage:
â€¢ context.user_data['agent_token'] - Temporary token storage
â€¢ Cleared after completion or cancel
```

## Integration Points

```
bot.py
â”œâ”€ textkeyboard()
â”‚  â”œâ”€ sign == 'agent_add_token' â”€â–º Validate and store token
â”‚  â””â”€ sign == 'agent_add_name' â”€â–º Create agent with stored token
â”‚
â””â”€ show_admin_panel()
   â””â”€ Button: callback_data='agent_manage'

bot_integration.py
â”œâ”€ integrate_agent_system()
â”‚  â”œâ”€ Register: agent_manage
â”‚  â”œâ”€ Register: agent_refresh
â”‚  â”œâ”€ Register: agent_new
â”‚  â”œâ”€ Register: agent_tgl
â”‚  â”œâ”€ Register: agent_del
â”‚  â””â”€ Register: Legacy handlers
â”‚
â””â”€ Handler Functions
   â”œâ”€ agent_manage() â”€â–º Show panel
   â”œâ”€ agent_refresh() â”€â–º Refresh panel
   â”œâ”€ agent_new() â”€â–º Start creation
   â”œâ”€ agent_tgl() â”€â–º Toggle agent
   â””â”€ agent_del() â”€â–º Delete agent
```

---

**All paths lead to successful completion or clear error messages!**
